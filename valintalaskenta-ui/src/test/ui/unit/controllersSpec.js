'use strict';

describe('navigationController', function(){
    var scope, location, ctrl, routeParams;

    beforeEach( function() {
        scope = {};
        location = new function(){
            this.path = function() {
                return "/haku/oid1/hakukohde/oid2";
            }
        };
        routeParams = {"hakuOid": "oid1", "hakukohdeOid": "oid2"};
        ctrl = new navigationController(scope, location, routeParams);
    });


    it('should have hakuOid', function() {
        expect(scope.hakuOid).toBe("oid1");
    });

    it('should have hakukohdeOid', function() {
        expect(scope.hakukohdeOid).toBe("oid2");
    });

    it('navClass should be current', function() {
        expect(scope.navClass("haku", 1)).toBe("current");
    });

    it('navClass should be empty', function() {
        expect(scope.navClass("haku", 3)).toBe("");
    });

});

describe('HakukohteetController', function(){
    var scope, ctrl;

    beforeEach(module('valintalaskenta'));

    beforeEach(inject(function($rootScope, $controller) {
        scope = $rootScope.$new();
        var routeParams = {"hakuOid": "oid1", "hakukohdeOid": "oid2"};
        ctrl = $controller(HakukohteetController, {$scope: scope, $routeParams: routeParams});
    }));

    it('should have', function() {
        expect(scope.model.hakukohteet.length).toBe(4);
    });

});

describe('ValintaesitysController', function(){
    var scope, ctrl, $httpBackend;

    beforeEach(module('valintalaskenta'));

    beforeEach(inject(function(_$httpBackend_, $rootScope, $controller) {
        scope = $rootScope.$new();
        $httpBackend = _$httpBackend_;
        var routeParams = {"hakuOid": "oid1", "hakukohdeOid": "oid2"};

        var haku = [{"createdAt":1362494754465,"hakuoid":"syksynhaku","valinnanvaihe":{"jarjestysnumero":1,"valinnanvaiheoid":"valinnanvaiheoid-gnaexf","valintatapajono":[{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956544},"versio":0,"nimi":"jonooid-wsotpe","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":8.0,"prioriteetti":0,"tila":"HYVAKSYTTAVISSA","kuvaus":null,"hakemusoid":"hakemusoid-cgjgos","etunimi":"Pentti","sukunimi":"Keskimäki"}],"oid":"jonooid-wsotpe"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956543},"versio":0,"nimi":"jonooid-cumipg","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":7.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste maantieto) ei ole olemassa","hakemusoid":"hakemusoid-cgjgos","etunimi":"Pentti","sukunimi":"Keskimäki"}],"oid":"jonooid-cumipg"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956542},"versio":0,"nimi":"jonooid-oyriky","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":4.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste maantieto) ei ole olemassa","hakemusoid":"hakemusoid-cgjgos","etunimi":"Pentti","sukunimi":"Keskimäki"}],"oid":"jonooid-oyriky"}]},"oid":"hakukohdeoid-jxcqah"},{"createdAt":1362494754474,"hakuoid":"syksynhaku","valinnanvaihe":{"jarjestysnumero":1,"valinnanvaiheoid":"valinnanvaiheoid-obakeg","valintatapajono":[{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956540},"versio":0,"nimi":"jonooid-xjmrzm","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":14.0,"prioriteetti":0,"tila":"HYVAKSYTTAVISSA","kuvaus":null,"hakemusoid":"hakemusoid-phjszr","etunimi":"Pentti","sukunimi":"Laakso"}],"oid":"jonooid-xjmrzm"}]},"oid":"hakukohdeoid-njtena"},{"createdAt":1362494754483,"hakuoid":"syksynhaku","valinnanvaihe":{"jarjestysnumero":1,"valinnanvaiheoid":"valinnanvaiheoid-ncbrtl","valintatapajono":[{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956538},"versio":0,"nimi":"jonooid-iurdme","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":9.0,"prioriteetti":0,"tila":"HYVAKSYTTAVISSA","kuvaus":null,"hakemusoid":"hakemusoid-zmyplg","etunimi":"Liisa","sukunimi":"Kuustonen"}],"oid":"jonooid-iurdme"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956537},"versio":0,"nimi":"jonooid-qidsei","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":4.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste filosofia) ei ole olemassa","hakemusoid":"hakemusoid-zmyplg","etunimi":"Liisa","sukunimi":"Kuustonen"}],"oid":"jonooid-qidsei"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956536},"versio":0,"nimi":"jonooid-ocwnza","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":13.0,"prioriteetti":0,"tila":"HYVAKSYTTAVISSA","kuvaus":null,"hakemusoid":"hakemusoid-zmyplg","etunimi":"Liisa","sukunimi":"Kuustonen"}],"oid":"jonooid-ocwnza"}]},"oid":"hakukohdeoid-lbijxh"},{"createdAt":1362494754491,"hakuoid":"syksynhaku","valinnanvaihe":{"jarjestysnumero":1,"valinnanvaiheoid":"valinnanvaiheoid-nrgscl","valintatapajono":[{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956534},"versio":0,"nimi":"jonooid-mogmgv","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":0.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste biologia) ei ole olemassa","hakemusoid":"hakemusoid-sbbkds","etunimi":"Liisa","sukunimi":"Laakso"}],"oid":"jonooid-mogmgv"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956533},"versio":0,"nimi":"jonooid-ffgzlv","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":7.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste matematiikka) ei ole olemassa","hakemusoid":"hakemusoid-sbbkds","etunimi":"Liisa","sukunimi":"Laakso"}],"oid":"jonooid-ffgzlv"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956532},"versio":0,"nimi":"jonooid-cpgozf","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":7.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste aidinkieli) ei ole olemassa","hakemusoid":"hakemusoid-sbbkds","etunimi":"Liisa","sukunimi":"Laakso"}],"oid":"jonooid-cpgozf"}]},"oid":"hakukohdeoid-gwucky"},{"createdAt":1362494754502,"hakuoid":"syksynhaku","valinnanvaihe":{"jarjestysnumero":1,"valinnanvaiheoid":"valinnanvaiheoid-kyypam","valintatapajono":[{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956530},"versio":0,"nimi":"jonooid-ziynse","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":6.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste maantieto) ei ole olemassa","hakemusoid":"hakemusoid-izwthq","etunimi":"Pentti","sukunimi":"Lötjönen"}],"oid":"jonooid-ziynse"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956529},"versio":0,"nimi":"jonooid-ftsohf","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":0.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste historia) ei ole olemassa","hakemusoid":"hakemusoid-izwthq","etunimi":"Pentti","sukunimi":"Lötjönen"}],"oid":"jonooid-ftsohf"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956528},"versio":0,"nimi":"jonooid-wgwhfq","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":4.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste biologia) ei ole olemassa","hakemusoid":"hakemusoid-izwthq","etunimi":"Pentti","sukunimi":"Lötjönen"}],"oid":"jonooid-wgwhfq"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956527},"versio":0,"nimi":"jonooid-ujvhua","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":0.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste aidinkieli) ei ole olemassa","hakemusoid":"hakemusoid-izwthq","etunimi":"Pentti","sukunimi":"Lötjönen"}],"oid":"jonooid-ujvhua"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956526},"versio":0,"nimi":"jonooid-xudjbh","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":0.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste aidinkieli) ei ole olemassa","hakemusoid":"hakemusoid-izwthq","etunimi":"Pentti","sukunimi":"Lötjönen"}],"oid":"jonooid-xudjbh"}]},"oid":"hakukohdeoid-ylavgi"},{"createdAt":1362494754509,"hakuoid":"syksynhaku","valinnanvaihe":{"jarjestysnumero":1,"valinnanvaiheoid":"valinnanvaiheoid-gnhzif","valintatapajono":[{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956524},"versio":0,"nimi":"jonooid-utjech","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":16.0,"prioriteetti":0,"tila":"HYVAKSYTTAVISSA","kuvaus":null,"hakemusoid":"hakemusoid-vmknmv","etunimi":"Mauri","sukunimi":"Blomqvist"}],"oid":"jonooid-utjech"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956523},"versio":0,"nimi":"jonooid-qshelg","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":14.0,"prioriteetti":0,"tila":"HYVAKSYTTAVISSA","kuvaus":null,"hakemusoid":"hakemusoid-vmknmv","etunimi":"Mauri","sukunimi":"Blomqvist"}],"oid":"jonooid-qshelg"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956522},"versio":0,"nimi":"jonooid-arygge","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":15.0,"prioriteetti":0,"tila":"HYVAKSYTTAVISSA","kuvaus":null,"hakemusoid":"hakemusoid-vmknmv","etunimi":"Mauri","sukunimi":"Blomqvist"}],"oid":"jonooid-arygge"}]},"oid":"hakukohdeoid-acohws"},{"createdAt":1362494754514,"hakuoid":"syksynhaku","valinnanvaihe":{"jarjestysnumero":1,"valinnanvaiheoid":"valinnanvaiheoid-bqbwna","valintatapajono":[{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956520},"versio":0,"nimi":"jonooid-lrnnkv","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":14.0,"prioriteetti":0,"tila":"HYVAKSYTTAVISSA","kuvaus":null,"hakemusoid":"hakemusoid-uqakwa","etunimi":"Jorma","sukunimi":"Kuustonen"}],"oid":"jonooid-lrnnkv"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956519},"versio":0,"nimi":"jonooid-spsdai","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":6.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste biologia) ei ole olemassa","hakemusoid":"hakemusoid-uqakwa","etunimi":"Jorma","sukunimi":"Kuustonen"}],"oid":"jonooid-spsdai"}]},"oid":"hakukohdeoid-pxlvzc"},{"createdAt":1362494754517,"hakuoid":"syksynhaku","valinnanvaihe":{"jarjestysnumero":1,"valinnanvaiheoid":"valinnanvaiheoid-bzgojo","valintatapajono":[{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956517},"versio":0,"nimi":"jonooid-nzpubo","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":9.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste kuvaamataito) ei ole olemassa","hakemusoid":"hakemusoid-efcmwo","etunimi":"Mauri","sukunimi":"Blomqvist"}],"oid":"jonooid-nzpubo"}]},"oid":"hakukohdeoid-gbfcav"},{"createdAt":1362494754526,"hakuoid":"syksynhaku","valinnanvaihe":{"jarjestysnumero":1,"valinnanvaiheoid":"valinnanvaiheoid-acvnxy","valintatapajono":[{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956515},"versio":0,"nimi":"jonooid-bbmkha","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":7.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste biologia) ei ole olemassa","hakemusoid":"hakemusoid-bfjnsg","etunimi":"Essi","sukunimi":"Lötjönen"}],"oid":"jonooid-bbmkha"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956514},"versio":0,"nimi":"jonooid-ozleij","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":7.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste maantieto) ei ole olemassa","hakemusoid":"hakemusoid-bfjnsg","etunimi":"Essi","sukunimi":"Lötjönen"}],"oid":"jonooid-ozleij"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956513},"versio":0,"nimi":"jonooid-zaeezk","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":7.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste biologia) ei ole olemassa","hakemusoid":"hakemusoid-bfjnsg","etunimi":"Essi","sukunimi":"Lötjönen"}],"oid":"jonooid-zaeezk"}]},"oid":"hakukohdeoid-dwzcuf"},{"createdAt":1362494754532,"hakuoid":"syksynhaku","valinnanvaihe":{"jarjestysnumero":1,"valinnanvaiheoid":"valinnanvaiheoid-besdol","valintatapajono":[{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956511},"versio":0,"nimi":"jonooid-gnzbgf","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":0.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste aidinkieli) ei ole olemassa","hakemusoid":"hakemusoid-bksuzd","etunimi":"Mauri","sukunimi":"Lötjönen"}],"oid":"jonooid-gnzbgf"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956510},"versio":0,"nimi":"jonooid-hfhvpb","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":0.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste kuvaamataito) ei ole olemassa","hakemusoid":"hakemusoid-bksuzd","etunimi":"Mauri","sukunimi":"Lötjönen"}],"oid":"jonooid-hfhvpb"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956509},"versio":0,"nimi":"jonooid-mnupuo","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":9.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste aidinkieli) ei ole olemassa","hakemusoid":"hakemusoid-bksuzd","etunimi":"Mauri","sukunimi":"Lötjönen"}],"oid":"jonooid-mnupuo"}]},"oid":"hakukohdeoid-oosssv"}]
        var valinnanvaihe = [{"jarjestysnumero":1,"valinnanvaiheoid":"valinnanvaiheoid-gnaexf","valintatapajono":[{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956544},"versio":0,"nimi":"jonooid-wsotpe","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":8.0,"prioriteetti":0,"tila":"HYVAKSYTTAVISSA","kuvaus":null,"hakemusoid":"hakemusoid-cgjgos","etunimi":"Pentti","sukunimi":"Keskimäki"}],"oid":"jonooid-wsotpe"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956543},"versio":0,"nimi":"jonooid-cumipg","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":7.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste maantieto) ei ole olemassa","hakemusoid":"hakemusoid-cgjgos","etunimi":"Pentti","sukunimi":"Keskimäki"}],"oid":"jonooid-cumipg"},{"id":{"time":1362494754000,"new":false,"machine":1164330086,"timeSecond":1362494754,"inc":-721956542},"versio":0,"nimi":"jonooid-oyriky","prioriteetti":1,"aloituspaikat":10,"siirretaanSijoitteluun":true,"jarjestyskriteeritulokset":[{"arvo":4.0,"prioriteetti":0,"tila":"HYLATTY","kuvaus":"Pakollista arvoa (tunniste maantieto) ei ole olemassa","hakemusoid":"hakemusoid-cgjgos","etunimi":"Pentti","sukunimi":"Keskimäki"}],"oid":"jonooid-oyriky"}]}]

        // returns the current list of phones
        $httpBackend.expectGET('resources/haku').respond(haku);
        $httpBackend.expectGET('resources/hakukohde/hakukohdeoid-jxcqah/valinnanvaihe').respond(valinnanvaihe);

        ctrl = $controller(ValintaesitysController, {$scope: scope, $routeParams: routeParams});
    }));

    afterEach(function() {
        $httpBackend.verifyNoOutstandingExpectation();
        $httpBackend.verifyNoOutstandingRequest();
    });

    it('should have', function() {
        $httpBackend.flush();
        expect(scope.model.hakukohde.valinnanvaiheoid).toBe('valinnanvaiheoid-gnaexf');
        expect(scope.model.valintatapajonot.length).toBe(3);
    });

});